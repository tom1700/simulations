(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[802],{2358:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/cube-with-noise",function(){return t(9874)}])},9874:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return O}});var i=t(5893),r=t(9008),o=t.n(r),u=t(7948),a=t(5861),s=t(6447),h=t(902),f=t(1078),c=t(7294),l=t(9477),d=t(9365);function p(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function v(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var g,w=function(e,n,t,i,r){return t*i*r+n*i+e};!function(e){e.TOP="TOP",e.RIGHT="RIGHT",e.LEFT="LEFT",e.BOTTOM="BOTTOM",e.FRONT="FRONT",e.BACK="BACK"}(g||(g={}));var x=function(){function e(n,t,i){var r,o=this;!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),this.hasNeighbour=function(e,n,t,i){var r=o.buffer,u=o.getNeighbourIndex(e,n,t,i);return!(u<0||u>r.length)&&!!r[u]},this._width=n,this._height=t,this._depth=i,this.buffer=new Array(this.width*this.depth*this.height),this.resetBuffer(),this.neighbourFunctionMap=(v(r={},g.TOP,(function(e,i,r){return w(e,i+1,r,n,t)})),v(r,g.BOTTOM,(function(e,i,r){return w(e,i-1,r,n,t)})),v(r,g.BACK,(function(e,i,r){return w(e,i,r-1,n,t)})),v(r,g.FRONT,(function(e,i,r){return w(e,i,r+1,n,t)})),v(r,g.LEFT,(function(e,i,r){return w(e-1,i,r,n,t)})),v(r,g.RIGHT,(function(e,i,r){return w(e+1,i,r,n,t)})),r)}var n,t,i,r=e.prototype;return r.resetBuffer=function(){for(var e=0;e<this.buffer.length;e++)this.buffer[e]=""},r.getNeighbourIndex=function(e,n,t,i){return this.neighbourFunctionMap[e](n,t,i)},r.setValue=function(e,n,t,i){var r=this,o=r.width,u=r.height,a=r.depth;e<0||n<0||t<0||e>=o||n>=u||t>=a||(this.buffer[w(e,n,t,o,u)]=i)},r.getValue=function(e,n,t){var i=this,r=i.width,o=i.height,u=i.depth;if(!(e<0||n<0||t<0||e>=r||n>=o||t>=u))return this.buffer[w(e,n,t,r,o)]},r.forEach=function(e){var n=this;this.buffer.forEach((function(t,i){var r=function(e,n,t){var i=Math.floor(e/(n*t));return{x:(e-=i*n*t)%n,y:Math.floor(e/n),z:i}}(i,n.width,n.height),o=r.x,u=r.y,a=r.z;return e(t,o,u,a)}))},n=e,(t=[{key:"width",get:function(){return this._width}},{key:"height",get:function(){return this._height}},{key:"depth",get:function(){return this._depth}}])&&p(n.prototype,t),i&&p(n,i),e}(),b=t(1664),m=t.n(b),y=t(7475),T=t(7048);function j(e){return Math.pow(2,e-8)}var C=function(){function e(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),this.shouldStop=!1}var n=e.prototype;return n.initializeGrid=function(e,n,t,i,r){var o=new x(e/n,e/n,e/n);return function(e,n,t,i){e.resetBuffer();for(var r=new T.ZP(n),o=0;o<=e.width;o+=1)for(var u=0;u<=e.depth;u+=1){var a=Math.floor((r.noise2D(o/t,u/t)+1)/2*e.height/i),s=a;for(console.log(a);s>=0;)e.setValue(o,s,u,"true"),s-=1}}(o,t,i,r),o},n.startAnimation=function(e,n,t,i,r,o){var u=this,a=e.clientWidth,s=e.clientHeight,h=new l.xsS,f=new l.cPb(75,a/s,.1,1e3),c=new l.nls({color:16777215});new d.z(f,e),f.position.z=3*n;var p=new l.CP7;p.setSize(a,s),e.appendChild(p.domElement);var v=new l.DvJ(t,t,t),g=new l.TOt(v);this.initializeGrid(n,t,i,r,o).forEach((function(e,i,r,o){if(e){var u=new l.ejS(g,c);u.position.x=i*t-n/2,u.position.y=r*t,u.position.z=o*t-n/2,h.add(u)}}));var w=function(){u.shouldStop?e.removeChild(p.domElement):(requestAnimationFrame(w),p.render(h,f))};w()},n.stopAnimation=function(){this.shouldStop=!0},e}(),O=function(){var e=(0,c.useState)(10),n=e[0],t=e[1],r=(0,c.useState)(1),l=r[0],d=r[1],p=(0,c.useState)(8),v=p[0],g=p[1],w=(0,c.useState)(1),x=w[0],b=w[1],T=(0,c.useState)("John"),O=T[0],_=T[1],A=(0,c.useRef)(),S=(0,c.useRef)(null),E=(0,c.useCallback)((function(){A.current&&A.current.stopAnimation(),S.current&&(A.current=new C,A.current.startAnimation(S.current,n,j(v),O,l,x))}),[x,v,O,n,l]);return(0,i.jsxs)(u.Z,{maxWidth:"lg",style:{minHeight:"100vh",paddingTop:"1rem",display:"flex",flexDirection:"column"},children:[(0,i.jsxs)(o(),{children:[(0,i.jsx)("title",{children:"Simulations"}),(0,i.jsx)("meta",{name:"description",content:"Cube based on noise"}),(0,i.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,i.jsx)(a.Z,{variant:"h3",component:"h1",children:"Cube based on noise"}),(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,i.jsx)(m(),{href:"/naive-cube",children:"< Naive Cube"}),(0,i.jsx)(m(),{href:"/optimize-mesh",children:"Optimize Mesh >"})]}),(0,i.jsxs)(s.Z,{spacing:2,direction:"row",style:{flex:1},children:[(0,i.jsx)("div",{style:{flex:2},ref:S}),(0,i.jsxs)(s.Z,{spacing:2,style:{flex:1},children:["Size: ",n,(0,i.jsx)(h.ZP,{min:1,max:100,step:1,value:n,onChange:function(e,n){return!Array.isArray(n)&&t(n)}}),"Resolution:"," ",j(v),(0,i.jsx)(h.ZP,{scale:j,value:v,min:1,step:1,max:8,valueLabelDisplay:"auto",onChange:function(e,n){return!Array.isArray(n)&&g(n)}}),"Total Grid Size: ",(0,i.jsx)("br",{}),Math.pow(n/j(v),3),"Seed:"," ",(0,i.jsx)(y.Z,{value:O,onChange:function(e){return _(e.target.value)}}),"Smoothness:",(0,i.jsx)(h.ZP,{min:1,max:20,step:1,value:l,onChange:function(e,n){return!Array.isArray(n)&&d(n)}}),"Noise strength reduction: ",x,(0,i.jsx)(h.ZP,{min:1,max:5,step:.25,value:x,onChange:function(e,n){return!Array.isArray(n)&&b(n)}}),(0,i.jsx)(f.Z,{onClick:E,children:"Create"})]})]})]})}}},function(e){e.O(0,[737,543,319,800,774,888,179],(function(){return n=2358,e(e.s=n);var n}));var n=e.O();_N_E=n}]);