(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[325],{2263:function(n,t,e){(window.__NEXT_P=window.__NEXT_P||[]).push(["/optimize-mesh",function(){return e(5277)}])},3254:function(n,t,e){"use strict";function i(n,t){for(var e=0;e<t.length;e++){var i=t[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}}function r(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}e.d(t,{Nm:function(){return o},qT:function(){return a}});var o,u=function(n,t,e,i,r){return e*i*r+t*i+n},s=function(n,t,e){var i=Math.floor(n/(t*e));return{x:(n-=i*t*e)%t,y:Math.floor(n/t),z:i}};!function(n){n.TOP="TOP",n.RIGHT="RIGHT",n.LEFT="LEFT",n.BOTTOM="BOTTOM",n.FRONT="FRONT",n.BACK="BACK"}(o||(o={}));var a=function(){function n(t,e,i){var a,h=this;!function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this.hasNeighbour=function(n,t,e,i){var r=h.buffer,o=h.getNeighbourIndex(n,t,e,i);return!(o<0||o>r.length)&&(0===t&&1===e&&0===i&&console.log(n,t,e,i,s(o,h.width,h.height),r[o]),!!r[o])},this._width=t,this._height=e,this._depth=i,this.buffer=new Array(this.width*this.depth*this.height),this.resetBuffer(),this.neighbourFunctionMap=(r(a={},o.TOP,(function(n,i,r){return h.isYWithinBounds(i+1)?u(n,i+1,r,t,e):-1})),r(a,o.BOTTOM,(function(n,i,r){return h.isYWithinBounds(i-1)?u(n,i-1,r,t,e):-1})),r(a,o.BACK,(function(n,i,r){return h.isZWithinBounds(r-1)?u(n,i,r-1,t,e):-1})),r(a,o.FRONT,(function(n,i,r){return h.isZWithinBounds(r+1)?u(n,i,r+1,t,e):-1})),r(a,o.LEFT,(function(n,i,r){return h.isXWithinBounds(n-1)?u(n-1,i,r,t,e):-1})),r(a,o.RIGHT,(function(n,i,r){return h.isXWithinBounds(n+1)?u(n+1,i,r,t,e):-1})),a)}var t,e,a,h=n.prototype;return h.isYWithinBounds=function(n){return n>0&&n<this.height},h.isXWithinBounds=function(n){return n>0&&n<this.width},h.isZWithinBounds=function(n){return n>0&&n<this.depth},h.resetBuffer=function(){for(var n=0;n<this.buffer.length;n++)this.buffer[n]=""},h.getNeighbourIndex=function(n,t,e,i){return this.neighbourFunctionMap[n](t,e,i)},h.setValue=function(n,t,e,i){var r=this,o=r.width,s=r.height,a=r.depth;n<0||t<0||e<0||n>=o||t>=s||e>=a||(this.buffer[u(n,t,e,o,s)]=i)},h.getValue=function(n,t,e){var i=this,r=i.width,o=i.height,s=i.depth;if(!(n<0||t<0||e<0||n>=r||t>=o||e>=s))return this.buffer[u(n,t,e,r,o)]},h.forEach=function(n){var t=this;this.buffer.forEach((function(e,i){var r=s(i,t.width,t.height),o=r.x,u=r.y,a=r.z;return n(e,o,u,a)}))},t=n,(e=[{key:"width",get:function(){return this._width}},{key:"height",get:function(){return this._height}},{key:"depth",get:function(){return this._depth}}])&&i(t.prototype,e),a&&i(t,a),n}()},832:function(n,t,e){"use strict";e.d(t,{$:function(){return r}});var i=e(7048),r=function(n,t,e,r){n.resetBuffer();for(var o=new i.ZP(t),u=0;u<=n.width;u+=1)for(var s=0;s<=n.depth;s+=1)for(var a=Math.floor((o.noise2D(u/e,s/e)+1)/2*n.height/r);a>=0;)n.setValue(u,a,s,"true"),a-=1}},5277:function(n,t,e){"use strict";e.r(t),e.d(t,{default:function(){return O}});var i=e(5893),r=e(9008),o=e.n(r),u=e(7948),s=e(5861),a=e(6447),h=e(3242),c=e(7507),f=e(3321),l=e(7294),p=e(9477),d=e(3254),m=e(1664),v=e.n(m),y=e(1317),g=e(832);function w(n,t){(null==t||t>n.length)&&(t=n.length);for(var e=0,i=new Array(t);e<t;e++)i[e]=n[e];return i}function b(n){return function(n){if(Array.isArray(n))return w(n)}(n)||function(n){if("undefined"!==typeof Symbol&&null!=n[Symbol.iterator]||null!=n["@@iterator"])return Array.from(n)}(n)||function(n,t){if(!n)return;if("string"===typeof n)return w(n,t);var e=Object.prototype.toString.call(n).slice(8,-1);"Object"===e&&n.constructor&&(e=n.constructor.name);if("Map"===e||"Set"===e)return Array.from(e);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return w(n,t)}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var x=[.7,0,0,.7,0,0,.7,0,0,.7,0,0,.7,0,0,.7,0,0],T=[0,0,.7,0,0,.7,0,0,.7,0,0,.7,0,0,.7,0,0,.7],j=[0,.7,0,0,.7,0,0,.7,0,0,.7,0,0,.7,0,0,.7,0],A=e(7995);function N(n){return Math.pow(2,n-8)}var C=function(){function n(){!function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this.shouldStop=!1}var t=n.prototype;return t.initializeGrid=function(n,t,e,i,r){var o=new d.qT(n/t,n/t,n/t);return(0,g.$)(o,e,i,r),o},t.startAnimation=function(n,t,e,i,r,o,u){var s=this,a=(0,A.Y)(n,t),h=a.scene,c=a.render,f=a.removeScene,l=new p.nls({color:16777215}),m=function(n,t){var e=new p.u9r,i=[],r=[];n.forEach((function(e,o,u,s){if(!e)return[];var a,h,c,f,l,p,m=o*t,v=u*t,y=s*t,g=t/2;n.hasNeighbour(d.Nm.FRONT,o,u,s)||(i.push(m-g,v-g,y+g,m+g,v-g,y+g,m+g,v+g,y+g,m+g,v+g,y+g,m-g,v+g,y+g,m-g,v-g,y+g),(a=r).push.apply(a,b(j))),n.hasNeighbour(d.Nm.BACK,o,u,s)||(i.push(m+g,v+g,y-g,m+g,v-g,y-g,m-g,v-g,y-g,m-g,v-g,y-g,m-g,v+g,y-g,m+g,v+g,y-g),(h=r).push.apply(h,b(j))),n.hasNeighbour(d.Nm.TOP,o,u,s)||(i.push(m-g,v+g,y-g,m-g,v+g,y+g,m+g,v+g,y+g,m+g,v+g,y+g,m+g,v+g,y-g,m-g,v+g,y-g),(c=r).push.apply(c,b(x))),n.hasNeighbour(d.Nm.BOTTOM,o,u,s)||(i.push(m+g,v-g,y+g,m-g,v-g,y+g,m-g,v-g,y-g,m-g,v-g,y-g,m+g,v-g,y-g,m+g,v-g,y+g),(f=r).push.apply(f,b(x))),n.hasNeighbour(d.Nm.LEFT,o,u,s)||(i.push(m-g,v-g,y-g,m-g,v-g,y+g,m-g,v+g,y+g,m-g,v+g,y+g,m-g,v+g,y-g,m-g,v-g,y-g),(l=r).push.apply(l,b(T))),n.hasNeighbour(d.Nm.RIGHT,o,u,s)||(i.push(m+g,v+g,y+g,m+g,v-g,y+g,m+g,v-g,y-g,m+g,v-g,y-g,m+g,v+g,y-g,m+g,v+g,y+g),(p=r).push.apply(p,b(T)))}));var o=new Float32Array(i),u=new Float32Array(r);return e.setAttribute("position",new p.TlE(o,3)),e.setAttribute("color",new p.TlE(u,3)),e}(this.initializeGrid(t,e,i,r,o),e);if(u){m.computeVertexNormals();var v=new p.Wid({vertexColors:!0}),y=new p.Kj0(m,v);y.position.x=-t/2,y.position.z=-t/2,h.add(y)}else{var g=new p.TOt(m),w=new p.ejS(g,l);w.position.x=-t/2,w.position.z=-t/2,h.add(w)}var N=function(){s.shouldStop?f():(requestAnimationFrame(N),c())};N()},t.stopAnimation=function(){this.shouldStop=!0},n}(),O=function(){var n=(0,l.useState)(10),t=n[0],e=n[1],r=(0,l.useState)(1),p=r[0],d=r[1],m=(0,l.useState)(8),g=m[0],w=m[1],b=(0,l.useState)(1),x=b[0],T=b[1],j=(0,l.useState)(!1),A=j[0],O=j[1],S=(0,l.useState)("John"),B=S[0],E=S[1],z=(0,l.useRef)(),_=(0,l.useRef)(null),P=(0,l.useCallback)((function(){z.current&&z.current.stopAnimation(),_.current&&(z.current=new C,z.current.startAnimation(_.current,t,N(g),B,p,x,A))}),[x,g,B,t,p,A]);return(0,i.jsxs)(u.Z,{maxWidth:"lg",style:{minHeight:"100vh",paddingTop:"1rem",display:"flex",flexDirection:"column"},children:[(0,i.jsxs)(o(),{children:[(0,i.jsx)("title",{children:"Simulations"}),(0,i.jsx)("meta",{name:"description",content:"Cube based on noise with optimized mesh"}),(0,i.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,i.jsx)(s.Z,{variant:"h3",component:"h1",children:"Cube based on noise with optimized mesh"}),(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,i.jsx)(v(),{href:"/optimize-mesh",children:"< Optimize Mesh"}),(0,i.jsx)(v(),{href:"/particle-gravity",children:"Particle Gravity >"})]}),(0,i.jsxs)(a.Z,{spacing:2,direction:"row",style:{flex:1},children:[(0,i.jsx)("div",{style:{flex:2},ref:_}),(0,i.jsxs)(a.Z,{spacing:2,style:{flex:1},children:["Size: ",t,(0,i.jsx)(c.ZP,{min:1,max:100,step:1,value:t,onChange:function(n,t){return!Array.isArray(t)&&e(t)}}),"Resolution:"," ",N(g),(0,i.jsx)(c.ZP,{scale:N,value:g,min:1,step:1,max:8,valueLabelDisplay:"auto",onChange:function(n,t){return!Array.isArray(t)&&w(t)}}),"Total Grid Size:"," ",Math.pow(t/N(g),3),(0,i.jsx)("br",{}),"Seed",(0,i.jsx)(y.Z,{value:B,onChange:function(n){return E(n.target.value)}}),"Smoothness:"," ",p,(0,i.jsx)(c.ZP,{min:1,max:40,step:1,value:p,onChange:function(n,t){return!Array.isArray(t)&&d(t)}}),"Noise strength reduction: ",x,(0,i.jsx)(c.ZP,{min:1,max:10,step:.25,value:x,onChange:function(n,t){return!Array.isArray(t)&&T(t)}}),(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:["Show mesh",(0,i.jsx)(h.Z,{value:A,onChange:function(n,t){O(t)}})]}),(0,i.jsx)(f.Z,{onClick:P,children:"Create"})]})]})]})}},7995:function(n,t,e){"use strict";e.d(t,{Y:function(){return o}});var i=e(9477),r=e(9365),o=function(n,t){var e=n.clientWidth,o=n.clientHeight,u=new i.xsS,s=new i.cPb(75,e/o,.1,1e3);s.position.z=3*t;var a=new i.Mig(8421504);u.add(a);var h=new i.Ox3(16777215,1);h.position.x=s.position.x,h.position.y=s.position.y,h.position.z=s.position.z,u.add(h),new r.z(s,n);var c=new i.CP7;c.setSize(e,o),n.appendChild(c.domElement);return{scene:u,removeScene:function(){n.removeChild(c.domElement)},render:function(){c.render(u,s)}}}}},function(n){n.O(0,[737,543,321,507,365,153,242,774,888,179],(function(){return t=2263,n(n.s=t);var t}));var t=n.O();_N_E=t}]);