(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[304],{5494:function(t,i,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/particle-gravity",function(){return n(8841)}])},8861:function(t,i,n){"use strict";n.d(i,{T:function(){return f}});var e=n(5893),s=n(7948),r=n(5861),o=n(9008),a=n.n(o),c=n(6447),u=n(1664),h=n.n(u),l=function(t){var i=t.backLink,n=t.backLabel,s=t.forwardLink,r=t.forwardLabel;return(0,e.jsxs)(c.Z,{spacing:2,direction:"row",style:{justifyContent:"space-between",padding:"0.5rem 0",marginBottom:"0.5rem",borderBottom:"solid 1px #AAA"},children:[i&&(0,e.jsx)(h(),{href:i,children:n}),s&&(0,e.jsx)(h(),{href:s,children:r})]})},f=function(t){var i=t.title,n=t.subtitle,o=t.backLink,c=t.backLabel,u=t.forwardLink,h=t.forwardLabel,f=t.children;return(0,e.jsxs)(s.Z,{maxWidth:"lg",style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[(0,e.jsxs)(a(),{children:[(0,e.jsx)("title",{children:"Simulations"}),(0,e.jsx)("meta",{name:"description",content:i}),(0,e.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,e.jsx)(l,{backLink:o,backLabel:c,forwardLink:u,forwardLabel:h}),(0,e.jsx)(r.Z,{variant:"h3",component:"h1",children:i}),n&&(0,e.jsx)(r.Z,{variant:"subtitle1",children:n}),f]})}},931:function(t,i,n){"use strict";n.d(i,{O:function(){return e}});var e=function(){function t(i,n,e){!function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,t),this.x=i,this.y=n,this.z=e}var i=t.prototype;return i.getAbsoluteVector=function(){return new t(Math.abs(this.x),Math.abs(this.y),Math.abs(this.z))},i.getDirectionVector=function(){return new t(0===this.x?0:Math.abs(this.x)/this.x,0===this.y?0:Math.abs(this.y)/this.y,0===this.z?0:Math.abs(this.z)/this.z)},i.getLongest=function(){var t=this.getAbsoluteVector();return t.x>t.y&&t.x>t.z?"x":t.y>t.z&&t.y>t.x?"y":"z"},i.getLength=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},i.getNormal=function(){var i=this.getLength();return new t(this.x/i,this.y/i,this.z/i)},i.multiply=function(i){return new t(this.x*i,this.y*i,this.z*i)},i.add=function(i){return new t(this.x+i.x,this.y+i.y,this.z+i.z)},i.subtract=function(i){return new t(this.x-i.x,this.y-i.y,this.z-i.z)},i.floor=function(){return new t(Math.floor(this.x),Math.floor(this.y),Math.floor(this.z))},i.ceil=function(){return new t(Math.ceil(this.x),Math.ceil(this.y),Math.ceil(this.z))},i.clone=function(){return new t(this.x,this.y,this.z)},i.addMutate=function(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this},i.subtractMutate=function(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this},i.cloneFrom=function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},i.multiplyMutate=function(t){return this.x*=t,this.y*=t,this.z*=t,this},i.floorMutate=function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},i.scalarProduct=function(t){return this.x*t.x+this.y*t.y+this.z*t.z},i.toString=function(){return"{x:".concat(this.x,",y:").concat(this.y,",z:").concat(this.z,"}")},t}()},8841:function(t,i,n){"use strict";n.r(i),n.d(i,{default:function(){return v}});var e=n(5893),s=n(6447),r=n(3321),o=n(7294),a=n(7995),c=n(931),u=n(3255);function h(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}function l(t,i){for(var n=0;n<i.length;n++){var e=i[n];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}var f=function(){function t(i){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;h(this,t),this._volume=0,this._mass=0,this._position=i,this._radius=n,this._hardness=e,this._density=s,this.updateVolumeAndMass()}var i,n,e,s=t.prototype;return s.updateVolumeAndMass=function(){this._volume=4/3*Math.PI*Math.pow(this.radius,3),this._mass=this._volume*this.density},s.setHardness=function(t){this._hardness=t},s.setDensity=function(t){this._density=t},i=t,(n=[{key:"position",get:function(){return this._position},set:function(t){this.position=t}},{key:"radius",get:function(){return this._radius},set:function(t){this.radius=t,this.updateVolumeAndMass()}},{key:"hardness",get:function(){return this._hardness}},{key:"density",get:function(){return this._density}},{key:"volume",get:function(){return this._volume}},{key:"mass",get:function(){return this._mass}}])&&l(i.prototype,n),e&&l(i,e),t}();var d=function(){function t(i,n){!function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,t),this.gravityDirection=new c.O(0,-1,0),this.gravityForce=9.8,this.velocityIncrease=new c.O(0,0,0),this.newPosition=new c.O(0,0,0),this.particles=i.map((function(t){return{particle:t,velocity:new c.O(0,0,0)}})),this.worldSize=n}var i=t.prototype;return i.ensureWorldBounds=function(t,i){t.x<=i&&(t.x=i),t.x>=this.worldSize-i&&(t.x=this.worldSize-i),t.y<=i&&(t.y=i),t.y>=this.worldSize-i&&(t.y=this.worldSize-i),t.z<=i&&(t.z=i),t.z>=this.worldSize-i&&(t.z=this.worldSize-i)},i.update=function(t){var i=this;this.velocityIncrease.cloneFrom(this.gravityDirection).multiplyMutate(this.gravityForce*t/1e3),this.particles.forEach((function(t){t.velocity.addMutate(i.velocityIncrease)})),this.particles.forEach((function(t){i.newPosition.cloneFrom(t.particle.position).addMutate(t.velocity),i.ensureWorldBounds(i.newPosition,t.particle.radius),t.particle.position.cloneFrom(i.newPosition)}))},t}(),y=n(9477),p=n(8861);var x=1e3/60,w=function(){function t(){!function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,t),this.shouldStop=!1}var i=t.prototype;return i.startAnimation=function(t){var i=this,n=(0,a.Y)(t,10),e=n.scene,s=n.render,r=n.removeScene,o=new Array(10).fill(0).map((function(){var t=new c.O((0,u.i)(0,10),(0,u.i)(0,10),(0,u.i)(0,10));return new f(t,.5)})),h=new d(o,10),l=o.map((function(t){var i=new y.xo$(t.radius),n=new y.vBJ({color:16711680}),s=new y.Kj0(i,n);return s.position.set(t.position.x,t.position.y,t.position.z),e.add(s),{sphere:s,particle:t}})),p=function(){i.shouldStop||(h.update(x),setTimeout(p,x))},w=function(){i.shouldStop?r():(l.forEach((function(t){var i=t.sphere,n=t.particle;i.position.set(n.position.x,n.position.y,n.position.z)})),requestAnimationFrame(w),s())};w(),setTimeout(p,3e3)},i.stopAnimation=function(){this.shouldStop=!0},t}(),v=function(){var t=(0,o.useRef)(),i=(0,o.useRef)(null),n=(0,o.useCallback)((function(){t.current&&t.current.stopAnimation(),i.current&&(t.current=new w,t.current.startAnimation(i.current))}),[]);return(0,e.jsx)(p.T,{title:"Gravity simulation for a bunch of particles",subtitle:"There are no collisions between them",backLink:"/optimize-mesh",backLabel:"< Optimize Mesh",forwardLink:"/particle-collision",forwardLabel:"Particle Collision >",children:(0,e.jsxs)(s.Z,{spacing:2,direction:"row",style:{flex:1},children:[(0,e.jsx)("div",{style:{flex:2},ref:i}),(0,e.jsx)(s.Z,{spacing:2,style:{flex:1},children:(0,e.jsx)(r.Z,{onClick:n,children:"Simulate"})})]})})}},7995:function(t,i,n){"use strict";n.d(i,{Y:function(){return r}});var e=n(9477),s=n(9365),r=function(t,i){var n=t.clientWidth,r=t.clientHeight,o=new e.xsS,a=new e.cPb(75,n/r,.1,1e3);a.position.z=3*i;var c=new e.Mig(8421504);o.add(c);var u=new e.Ox3(16777215,1);u.position.x=a.position.x,u.position.y=a.position.y,u.position.z=a.position.z,o.add(u),new s.z(a,t);var h=new e.CP7;h.setSize(n,r),t.appendChild(h.domElement);return{scene:o,removeScene:function(){t.removeChild(h.domElement)},render:function(){h.render(o,a)}}}},3255:function(t,i,n){"use strict";n.d(i,{i:function(){return e}});var e=function(t,i){return Math.random()*(i-t)+t}}},function(t){t.O(0,[737,543,321,365,774,888,179],(function(){return i=5494,t(t.s=i);var i}));var i=t.O();_N_E=i}]);