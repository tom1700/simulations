(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[802],{2358:function(n,t,e){(window.__NEXT_P=window.__NEXT_P||[]).push(["/cube-with-noise",function(){return e(4661)}])},8861:function(n,t,e){"use strict";e.d(t,{T:function(){return l}});var i=e(5893),r=e(7948),o=e(5861),u=e(9008),s=e.n(u),a=e(6447),h=e(1664),c=e.n(h),f=function(n){var t=n.backLink,e=n.backLabel,r=n.forwardLink,o=n.forwardLabel;return(0,i.jsxs)(a.Z,{spacing:2,direction:"row",style:{justifyContent:"space-between",padding:"0.5rem 0",marginBottom:"0.5rem",borderBottom:"solid 1px #AAA"},children:[t&&(0,i.jsx)(c(),{href:t,children:e}),r&&(0,i.jsx)(c(),{href:r,children:o})]})},l=function(n){var t=n.title,e=n.subtitle,u=n.backLink,a=n.backLabel,h=n.forwardLink,c=n.forwardLabel,l=n.children;return(0,i.jsxs)(r.Z,{maxWidth:"lg",style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[(0,i.jsxs)(s(),{children:[(0,i.jsx)("title",{children:"Simulations"}),(0,i.jsx)("meta",{name:"description",content:t}),(0,i.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,i.jsx)(f,{backLink:u,backLabel:a,forwardLink:h,forwardLabel:c}),(0,i.jsx)(o.Z,{variant:"h3",component:"h1",children:t}),e&&(0,i.jsx)(o.Z,{variant:"subtitle1",children:e}),l]})}},3254:function(n,t,e){"use strict";function i(n,t){for(var e=0;e<t.length;e++){var i=t[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}}function r(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}e.d(t,{Nm:function(){return o},qT:function(){return a}});var o,u=function(n,t,e,i,r){return e*i*r+t*i+n},s=function(n,t,e){var i=Math.floor(n/(t*e));return{x:(n-=i*t*e)%t,y:Math.floor(n/t),z:i}};!function(n){n.TOP="TOP",n.RIGHT="RIGHT",n.LEFT="LEFT",n.BOTTOM="BOTTOM",n.FRONT="FRONT",n.BACK="BACK"}(o||(o={}));var a=function(){function n(t,e,i){var a,h=this;!function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this.hasNeighbour=function(n,t,e,i){var r=h.buffer,o=h.getNeighbourIndex(n,t,e,i);return!(o<0||o>r.length)&&(0===t&&1===e&&0===i&&console.log(n,t,e,i,s(o,h.width,h.height),r[o]),!!r[o])},this._width=t,this._height=e,this._depth=i,this.buffer=new Array(this.width*this.depth*this.height),this.resetBuffer(),this.neighbourFunctionMap=(r(a={},o.TOP,(function(n,i,r){return h.isYWithinBounds(i+1)?u(n,i+1,r,t,e):-1})),r(a,o.BOTTOM,(function(n,i,r){return h.isYWithinBounds(i-1)?u(n,i-1,r,t,e):-1})),r(a,o.BACK,(function(n,i,r){return h.isZWithinBounds(r-1)?u(n,i,r-1,t,e):-1})),r(a,o.FRONT,(function(n,i,r){return h.isZWithinBounds(r+1)?u(n,i,r+1,t,e):-1})),r(a,o.LEFT,(function(n,i,r){return h.isXWithinBounds(n-1)?u(n-1,i,r,t,e):-1})),r(a,o.RIGHT,(function(n,i,r){return h.isXWithinBounds(n+1)?u(n+1,i,r,t,e):-1})),a)}var t,e,a,h=n.prototype;return h.isYWithinBounds=function(n){return n>0&&n<this.height},h.isXWithinBounds=function(n){return n>0&&n<this.width},h.isZWithinBounds=function(n){return n>0&&n<this.depth},h.resetBuffer=function(){for(var n=0;n<this.buffer.length;n++)this.buffer[n]=""},h.getNeighbourIndex=function(n,t,e,i){return this.neighbourFunctionMap[n](t,e,i)},h.setValue=function(n,t,e,i){var r=this,o=r.width,s=r.height,a=r.depth;n<0||t<0||e<0||n>=o||t>=s||e>=a||(this.buffer[u(n,t,e,o,s)]=i)},h.getValue=function(n,t,e){var i=this,r=i.width,o=i.height,s=i.depth;if(!(n<0||t<0||e<0||n>=r||t>=o||e>=s))return this.buffer[u(n,t,e,r,o)]},h.forEach=function(n){var t=this;this.buffer.forEach((function(e,i){var r=s(i,t.width,t.height),o=r.x,u=r.y,a=r.z;return n(e,o,u,a)}))},t=n,(e=[{key:"width",get:function(){return this._width}},{key:"height",get:function(){return this._height}},{key:"depth",get:function(){return this._depth}}])&&i(t.prototype,e),a&&i(t,a),n}()},832:function(n,t,e){"use strict";e.d(t,{$:function(){return r}});var i=e(7048),r=function(n,t,e,r){n.resetBuffer();for(var o=new i.ZP(t),u=0;u<=n.width;u+=1)for(var s=0;s<=n.depth;s+=1)for(var a=Math.floor((o.noise2D(u/e,s/e)+1)/2*n.height/r);a>=0;)n.setValue(u,a,s,"true"),a-=1}},4661:function(n,t,e){"use strict";e.r(t);var i=e(5893),r=e(6447),o=e(7507),u=e(3321),s=e(7294),a=e(9477),h=e(9365),c=e(3254),f=e(1317),l=e(832),d=e(8861);function b(n){return Math.pow(2,n-8)}var p=function(){function n(){!function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this.shouldStop=!1}var t=n.prototype;return t.initializeGrid=function(n,t,e,i,r){var o=new c.qT(n/t,n/t,n/t);return(0,l.$)(o,e,i,r),o},t.startAnimation=function(n,t,e,i,r,o){var u=this,s=n.clientWidth,c=n.clientHeight,f=new a.xsS,l=new a.cPb(75,s/c,.1,1e3),d=new a.nls({color:16777215});new h.z(l,n),l.position.z=3*t;var b=new a.CP7;b.setSize(s,c),n.appendChild(b.domElement);var p=new a.DvJ(e,e,e),v=new a.TOt(p);this.initializeGrid(t,e,i,r,o).forEach((function(n,i,r,o){if(n){var u=new a.ejS(v,d);u.position.x=i*e-t/2,u.position.y=r*e,u.position.z=o*e-t/2,f.add(u)}}));var w=function(){u.shouldStop?n.removeChild(b.domElement):(requestAnimationFrame(w),b.render(f,l))};w()},t.stopAnimation=function(){this.shouldStop=!0},n}();t.default=function(){var n=(0,s.useState)(10),t=n[0],e=n[1],a=(0,s.useState)(1),h=a[0],c=a[1],l=(0,s.useState)(8),v=l[0],w=l[1],g=(0,s.useState)(1),m=g[0],x=g[1],y=(0,s.useState)("John"),T=y[0],k=y[1],j=(0,s.useRef)(),C=(0,s.useRef)(null),A=(0,s.useCallback)((function(){j.current&&j.current.stopAnimation(),C.current&&(j.current=new p,j.current.startAnimation(C.current,t,b(v),T,h,m))}),[m,v,T,t,h]);return(0,i.jsx)(d.T,{title:"Cube based on noise",subtitle:"Instead of having a uniform grid, I'm introducing some noise. The result is minecraft-like terrain. Each cube is still a Three.js box.",backLink:"/naive-cube",backLabel:"< Naive Cube",forwardLink:"/optimize-mesh",forwardLabel:"Optimize Mesh >",children:(0,i.jsxs)(r.Z,{spacing:2,direction:"row",style:{flex:1},children:[(0,i.jsx)("div",{style:{flex:2},ref:C}),(0,i.jsxs)(r.Z,{spacing:2,style:{flex:1},children:["Size: ",t,(0,i.jsx)(o.ZP,{min:1,max:100,step:1,value:t,onChange:function(n,t){return!Array.isArray(t)&&e(t)}}),"Resolution:"," ",b(v),(0,i.jsx)(o.ZP,{scale:b,value:v,min:1,step:1,max:8,valueLabelDisplay:"auto",onChange:function(n,t){return!Array.isArray(t)&&w(t)}}),"Total Grid Size: ",(0,i.jsx)("br",{}),Math.pow(t/b(v),3),"Seed:"," ",(0,i.jsx)(f.Z,{value:T,onChange:function(n){return k(n.target.value)}}),"Smoothness:",(0,i.jsx)(o.ZP,{min:1,max:20,step:1,value:h,onChange:function(n,t){return!Array.isArray(t)&&c(t)}}),"Noise strength reduction: ",m,(0,i.jsx)(o.ZP,{min:1,max:5,step:.25,value:m,onChange:function(n,t){return!Array.isArray(t)&&x(t)}}),(0,i.jsx)(u.Z,{onClick:A,children:"Create"})]})]})})}}},function(n){n.O(0,[737,543,321,507,365,153,774,888,179],(function(){return t=2358,n(n.s=t);var t}));var t=n.O();_N_E=t}]);