(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[325],{2263:function(t,n,e){(window.__NEXT_P=window.__NEXT_P||[]).push(["/optimize-mesh",function(){return e(5277)}])},3254:function(t,n,e){"use strict";function i(t,n){for(var e=0;e<n.length;e++){var i=n[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function r(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}e.d(n,{Nm:function(){return o},qT:function(){return a}});var o,u=function(t,n,e,i,r){return e*i*r+n*i+t},s=function(t,n,e){var i=Math.floor(t/(n*e));return{x:(t-=i*n*e)%n,y:Math.floor(t/n),z:i}};!function(t){t.TOP="TOP",t.RIGHT="RIGHT",t.LEFT="LEFT",t.BOTTOM="BOTTOM",t.FRONT="FRONT",t.BACK="BACK"}(o||(o={}));var a=function(){function t(n,e,i){var a,h=this;!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),this.hasNeighbour=function(t,n,e,i){var r=h.buffer,o=h.getNeighbourIndex(t,n,e,i);return!(o<0||o>r.length)&&(0===n&&1===e&&0===i&&console.log(t,n,e,i,s(o,h.width,h.height),r[o]),!!r[o])},this._width=n,this._height=e,this._depth=i,this.buffer=new Array(this.width*this.depth*this.height),this.resetBuffer(),this.neighbourFunctionMap=(r(a={},o.TOP,(function(t,i,r){return h.isYWithinBounds(i+1)?u(t,i+1,r,n,e):-1})),r(a,o.BOTTOM,(function(t,i,r){return h.isYWithinBounds(i-1)?u(t,i-1,r,n,e):-1})),r(a,o.BACK,(function(t,i,r){return h.isZWithinBounds(r-1)?u(t,i,r-1,n,e):-1})),r(a,o.FRONT,(function(t,i,r){return h.isZWithinBounds(r+1)?u(t,i,r+1,n,e):-1})),r(a,o.LEFT,(function(t,i,r){return h.isXWithinBounds(t-1)?u(t-1,i,r,n,e):-1})),r(a,o.RIGHT,(function(t,i,r){return h.isXWithinBounds(t+1)?u(t+1,i,r,n,e):-1})),a)}var n,e,a,h=t.prototype;return h.isYWithinBounds=function(t){return t>0&&t<this.height},h.isXWithinBounds=function(t){return t>0&&t<this.width},h.isZWithinBounds=function(t){return t>0&&t<this.depth},h.resetBuffer=function(){for(var t=0;t<this.buffer.length;t++)this.buffer[t]=""},h.getNeighbourIndex=function(t,n,e,i){return this.neighbourFunctionMap[t](n,e,i)},h.setValue=function(t,n,e,i){var r=this,o=r.width,s=r.height,a=r.depth;t<0||n<0||e<0||t>=o||n>=s||e>=a||(this.buffer[u(t,n,e,o,s)]=i)},h.getValue=function(t,n,e){var i=this,r=i.width,o=i.height,s=i.depth;if(!(t<0||n<0||e<0||t>=r||n>=o||e>=s))return this.buffer[u(t,n,e,r,o)]},h.forEach=function(t){var n=this;this.buffer.forEach((function(e,i){var r=s(i,n.width,n.height),o=r.x,u=r.y,a=r.z;return t(e,o,u,a)}))},n=t,(e=[{key:"width",get:function(){return this._width}},{key:"height",get:function(){return this._height}},{key:"depth",get:function(){return this._depth}}])&&i(n.prototype,e),a&&i(n,a),t}()},832:function(t,n,e){"use strict";e.d(n,{$:function(){return r}});var i=e(7048),r=function(t,n,e,r){t.resetBuffer();for(var o=new i.ZP(n),u=0;u<=t.width;u+=1)for(var s=0;s<=t.depth;s+=1)for(var a=Math.floor((o.noise2D(u/e,s/e)+1)/2*t.height/r);a>=0;)t.setValue(u,a,s,"true"),a-=1}},5277:function(t,n,e){"use strict";e.r(n),e.d(n,{default:function(){return O}});var i=e(5893),r=e(9008),o=e.n(r),u=e(7948),s=e(5861),a=e(6447),h=e(3242),f=e(7507),c=e(3321),l=e(7294),p=e(9477),d=e(9365),m=e(3254),v=e(1664),y=e.n(v),g=e(1317),w=e(832);function b(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,i=new Array(n);e<n;e++)i[e]=t[e];return i}function x(t){return function(t){if(Array.isArray(t))return b(t)}(t)||function(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,n){if(!t)return;if("string"===typeof t)return b(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);"Object"===e&&t.constructor&&(e=t.constructor.name);if("Map"===e||"Set"===e)return Array.from(e);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return b(t,n)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var T=[.7,0,0,.7,0,0,.7,0,0,.7,0,0,.7,0,0,.7,0,0],A=[0,0,.7,0,0,.7,0,0,.7,0,0,.7,0,0,.7,0,0,.7],j=[0,.7,0,0,.7,0,0,.7,0,0,.7,0,0,.7,0,0,.7,0];function N(t){return Math.pow(2,t-8)}var C=function(){function t(){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),this.shouldStop=!1}var n=t.prototype;return n.initializeGrid=function(t,n,e,i,r){var o=new m.qT(t/n,t/n,t/n);return(0,w.$)(o,e,i,r),o},n.startAnimation=function(t,n,e,i,r,o,u){var s=this,a=t.clientWidth,h=t.clientHeight,f=new p.xsS,c=new p.cPb(75,a/h,.1,1e3),l=new p.nls({color:16777215});new d.z(c,t),c.position.z=3*n;var v=new p.CP7;v.setSize(a,h),t.appendChild(v.domElement);var y=function(t,n){var e=new p.u9r,i=[],r=[];t.forEach((function(e,o,u,s){if(!e)return[];var a,h,f,c,l,p,d=o*n,v=u*n,y=s*n,g=n/2;t.hasNeighbour(m.Nm.FRONT,o,u,s)||(i.push(d-g,v-g,y+g,d+g,v-g,y+g,d+g,v+g,y+g,d+g,v+g,y+g,d-g,v+g,y+g,d-g,v-g,y+g),(a=r).push.apply(a,x(j))),t.hasNeighbour(m.Nm.BACK,o,u,s)||(i.push(d+g,v+g,y-g,d+g,v-g,y-g,d-g,v-g,y-g,d-g,v-g,y-g,d-g,v+g,y-g,d+g,v+g,y-g),(h=r).push.apply(h,x(j))),t.hasNeighbour(m.Nm.TOP,o,u,s)||(i.push(d-g,v+g,y-g,d-g,v+g,y+g,d+g,v+g,y+g,d+g,v+g,y+g,d+g,v+g,y-g,d-g,v+g,y-g),(f=r).push.apply(f,x(T))),t.hasNeighbour(m.Nm.BOTTOM,o,u,s)||(i.push(d+g,v-g,y+g,d-g,v-g,y+g,d-g,v-g,y-g,d-g,v-g,y-g,d+g,v-g,y-g,d+g,v-g,y+g),(c=r).push.apply(c,x(T))),t.hasNeighbour(m.Nm.LEFT,o,u,s)||(i.push(d-g,v-g,y-g,d-g,v-g,y+g,d-g,v+g,y+g,d-g,v+g,y+g,d-g,v+g,y-g,d-g,v-g,y-g),(l=r).push.apply(l,x(A))),t.hasNeighbour(m.Nm.RIGHT,o,u,s)||(i.push(d+g,v+g,y+g,d+g,v-g,y+g,d+g,v-g,y-g,d+g,v-g,y-g,d+g,v+g,y-g,d+g,v+g,y+g),(p=r).push.apply(p,x(A)))}));var o=new Float32Array(i),u=new Float32Array(r);return e.setAttribute("position",new p.TlE(o,3)),e.setAttribute("color",new p.TlE(u,3)),e}(this.initializeGrid(n,e,i,r,o),e);if(u){y.computeVertexNormals();var g=new p.Wid({vertexColors:!0}),w=new p.Kj0(y,g);w.position.x=-n/2,w.position.z=-n/2,f.add(w)}else{var b=new p.TOt(y),N=new p.ejS(b,l);N.position.x=-n/2,N.position.z=-n/2,f.add(N)}var C=new p.Mig(8421504);f.add(C);var O=new p.Ox3(16777215,1);O.position.x=c.position.x,O.position.y=c.position.y,O.position.z=c.position.z,f.add(O);var S=function(){s.shouldStop?t.removeChild(v.domElement):(requestAnimationFrame(S),v.render(f,c))};S()},n.stopAnimation=function(){this.shouldStop=!0},t}(),O=function(){var t=(0,l.useState)(10),n=t[0],e=t[1],r=(0,l.useState)(1),p=r[0],d=r[1],m=(0,l.useState)(8),v=m[0],w=m[1],b=(0,l.useState)(1),x=b[0],T=b[1],A=(0,l.useState)(!1),j=A[0],O=A[1],S=(0,l.useState)("John"),B=S[0],E=S[1],z=(0,l.useRef)(),_=(0,l.useRef)(null),P=(0,l.useCallback)((function(){z.current&&z.current.stopAnimation(),_.current&&(z.current=new C,z.current.startAnimation(_.current,n,N(v),B,p,x,j))}),[x,v,B,n,p,j]);return(0,i.jsxs)(u.Z,{maxWidth:"lg",style:{minHeight:"100vh",paddingTop:"1rem",display:"flex",flexDirection:"column"},children:[(0,i.jsxs)(o(),{children:[(0,i.jsx)("title",{children:"Simulations"}),(0,i.jsx)("meta",{name:"description",content:"Cube based on noise with optimized mesh"}),(0,i.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,i.jsx)(s.Z,{variant:"h3",component:"h1",children:"Cube based on noise with optimized mesh"}),(0,i.jsx)("div",{style:{display:"flex",justifyContent:"space-between"},children:(0,i.jsx)(y(),{href:"/optimize-mesh",children:"< Optimize Mesh"})}),(0,i.jsxs)(a.Z,{spacing:2,direction:"row",style:{flex:1},children:[(0,i.jsx)("div",{style:{flex:2},ref:_}),(0,i.jsxs)(a.Z,{spacing:2,style:{flex:1},children:["Size: ",n,(0,i.jsx)(f.ZP,{min:1,max:100,step:1,value:n,onChange:function(t,n){return!Array.isArray(n)&&e(n)}}),"Resolution:"," ",N(v),(0,i.jsx)(f.ZP,{scale:N,value:v,min:1,step:1,max:8,valueLabelDisplay:"auto",onChange:function(t,n){return!Array.isArray(n)&&w(n)}}),"Total Grid Size:"," ",Math.pow(n/N(v),3),(0,i.jsx)("br",{}),"Seed",(0,i.jsx)(g.Z,{value:B,onChange:function(t){return E(t.target.value)}}),"Smoothness:"," ",p,(0,i.jsx)(f.ZP,{min:1,max:40,step:1,value:p,onChange:function(t,n){return!Array.isArray(n)&&d(n)}}),"Noise strength reduction: ",x,(0,i.jsx)(f.ZP,{min:1,max:10,step:.25,value:x,onChange:function(t,n){return!Array.isArray(n)&&T(n)}}),(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:["Show mesh",(0,i.jsx)(h.Z,{value:j,onChange:function(t,n){O(n)}})]}),(0,i.jsx)(c.Z,{onClick:P,children:"Create"})]})]})]})}}},function(t){t.O(0,[737,543,854,153,242,774,888,179],(function(){return n=2263,t(t.s=n);var n}));var n=t.O();_N_E=n}]);