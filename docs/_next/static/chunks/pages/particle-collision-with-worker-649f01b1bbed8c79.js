(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[124],{3063:function(n,e,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/particle-collision-with-worker",function(){return i(2809)}])},8861:function(n,e,i){"use strict";i.d(e,{T:function(){return h}});var t=i(5893),r=i(7948),o=i(5861),s=i(9008),a=i.n(s),c=i(6447),u=i(1664),l=i.n(u),d=function(n){var e=n.backLink,i=n.backLabel,r=n.forwardLink,o=n.forwardLabel;return(0,t.jsxs)(c.Z,{spacing:2,direction:"row",style:{justifyContent:"space-between",padding:"0.5rem 0",marginBottom:"0.5rem",borderBottom:"solid 1px #AAA"},children:[e&&(0,t.jsx)(l(),{href:e,children:i}),r&&(0,t.jsx)(l(),{href:r,children:o})]})},h=function(n){var e=n.title,i=n.subtitle,s=n.backLink,c=n.backLabel,u=n.forwardLink,l=n.forwardLabel,h=n.children;return(0,t.jsxs)(r.Z,{maxWidth:"lg",style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[(0,t.jsxs)(a(),{children:[(0,t.jsx)("title",{children:"Simulations"}),(0,t.jsx)("meta",{name:"description",content:e}),(0,t.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,t.jsx)(d,{backLink:s,backLabel:c,forwardLink:u,forwardLabel:l}),(0,t.jsx)(o.Z,{variant:"h3",component:"h1",children:e}),i&&(0,t.jsx)(o.Z,{variant:"subtitle1",children:i}),h]})}},2809:function(n,e,i){"use strict";i.r(e);var t=i(5893),r=i(6447),o=i(7507),s=i(3321),a=i(7294),c=i(9477),u=i(7995),l=i(8861);var d=function(){function n(e,i,t){!function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.shouldStop=!1,this.isInitialized=!1,this.idIndexMap={},this.sphereMeshes=[],this.worldSize=e,this.particlesAmount=i,this.onFPSUpdate=t}var e=n.prototype;return e.initializeMeshes=function(n){var e=this;this.sphereMeshes=n.map((function(n,i){var t;e.idIndexMap[n.id]=i;var r=new c.xo$(1),o=new c.vBJ({color:16711680}),s=new c.Kj0(r,o);return s.position.set(n.x,n.y,n.z),null===(t=e.scene)||void 0===t||t.add(s),s}))},e.update=function(n){var e=this;if(!this.isInitialized)return this.initializeMeshes(n),void(this.isInitialized=!0);n.forEach((function(n){!function(n,e){n.position.x=e.x,n.position.y=e.y,n.position.z=e.z,n.quaternion.x=e.quaternionX,n.quaternion.y=e.quaternionY,n.quaternion.z=e.quaternionZ,n.quaternion.w=e.quaternionW}(e.sphereMeshes[e.idIndexMap[n.id]],n)}))},e.startAnimation=function(n){var e=this,i=(0,u.Y)(n,this.worldSize),t=i.scene,r=i.render,o=i.removeScene;this.scene=t;var s=function(){e.shouldStop?o():(requestAnimationFrame(s),r())};s()},e.stopAnimation=function(){this.shouldStop=!0},n}();e.default=function(){var n=(0,a.useRef)(),e=(0,a.useRef)(null),c=(0,a.useRef)(null),u=(0,a.useState)(10),h=u[0],f=u[1],p=(0,a.useState)(10),v=p[0],m=p[1],x=(0,a.useRef)();(0,a.useEffect)((function(){return x.current=new Worker(new URL(i.p+i.u(298),i.b)),function(){var n;null===(n=x.current)||void 0===n||n.terminate()}}),[]);var w=(0,a.useCallback)((function(){var i,t;e.current&&x.current&&(n.current&&(n.current.stopAnimation(),x.current.postMessage({type:"STOP"})),n.current=new d(h,v,(function(n){c.current&&(c.current.innerText=n.toFixed(0))})),n.current.startAnimation(e.current),x.current.onmessage=function(e){var i;null===(i=n.current)||void 0===i||i.update(e.data)},null===(i=x.current)||void 0===i||i.postMessage({type:"INITIALIZE",worldSize:h,particlesAmount:v}),null===(t=x.current)||void 0===t||t.postMessage({type:"START"}))}),[v,h]);return(0,t.jsx)(l.T,{title:"Particle simulation with collisions and webworker",subtitle:"The same as before but this time I'm moving the physics engine to webworker to improve performance",backLink:"/particle-collision",backLabel:"< Particle Collision",children:(0,t.jsxs)(r.Z,{spacing:2,direction:"row",style:{flex:1},children:[(0,t.jsx)("div",{style:{flex:2},ref:e}),(0,t.jsxs)(r.Z,{spacing:2,style:{flex:1},children:["World Size: ",h,(0,t.jsx)(o.ZP,{min:10,max:100,step:1,value:h,onChange:function(n,e){return!Array.isArray(e)&&f(e)}}),"Particles Amount: ",v,(0,t.jsx)(o.ZP,{min:10,max:2e3,step:1,value:v,onChange:function(n,e){return!Array.isArray(e)&&m(e)}}),(0,t.jsxs)("div",{children:["FPS: ",(0,t.jsx)("span",{ref:c,children:"0"})]}),(0,t.jsx)(s.Z,{onClick:w,children:"Simulate"})]})]})})}},7995:function(n,e,i){"use strict";i.d(e,{Y:function(){return o}});var t=i(9477),r=i(9365),o=function(n,e){var i=n.clientWidth,o=n.clientHeight,s=new t.xsS,a=new t.cPb(75,i/o,.1,1e3);a.position.z=3*e;var c=new t.Mig(8421504);s.add(c);var u=new t.Ox3(16777215,1);u.position.x=a.position.x,u.position.y=a.position.y,u.position.z=a.position.z,s.add(u),new r.z(a,n);var l=new t.CP7;l.setSize(i,o),n.appendChild(l.domElement);return{scene:s,removeScene:function(){n.removeChild(l.domElement)},render:function(){l.render(s,a)}}}}},function(n){n.O(0,[737,543,321,507,365,774,888,179],(function(){return e=3063,n(n.s=e);var e}));var e=n.O();_N_E=e}]);